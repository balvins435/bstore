<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BStore - Modern Electronics Store</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #6366f1;
        --primary-dark: #4f46e5;
        --secondary: #8b5cf6;
        --accent: #06b6d4;
        --success: #10b981;
        --warning: #f59e0b;
        --error: #ef4444;
        --dark: #0f172a;
        --darker: #020617;
        --text: #1e293b;
        --text-light: #64748b;
        --white: #ffffff;
        --gray-50: #f8fafc;
        --gray-100: #f1f5f9;
        --gray-200: #e2e8f0;
        --gray-800: #1e293b;
        --gray-900: #0f172a;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        --gradient-primary: linear-gradient(
          135deg,
          var(--primary),
          var(--secondary)
        );
        --gradient-accent: linear-gradient(
          135deg,
          var(--accent),
          var(--primary)
        );
        --gradient-hero: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --blur: blur(20px);
        --radius: 12px;
        --radius-lg: 16px;
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        line-height: 1.6;
        color: var(--text);
        background: var(--gray-50);
        overflow-x: hidden;
      }

      /* Enhanced Mobile-First Header */
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: var(--blur);
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        z-index: 1000;
        transition: var(--transition);
      }

      .header.scrolled {
        background: rgba(0, 0, 0, 0.8);
        box-shadow: var(--shadow-lg);
      }

      .nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 2rem;
        max-width: 1400px;
        margin: 0 auto;
        position: relative;
      }

      .logo {
        font-size: 1.75rem;
        font-weight: 800;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        letter-spacing: -0.025em;
        z-index: 1001;
      }

      /* Mobile Navigation Toggle */
      .nav-toggle {
        display: none;
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text);
        z-index: 1001;
      }

      .nav-links {
        display: flex;
        list-style: none;
        gap: 2rem;
        align-items: center;
      }

      .nav-links a {
        text-decoration: none;
        color: var(--text);
        font-weight: 500;
        transition: var(--transition);
        position: relative;
        padding: 0.5rem 0;
      }

      .nav-links a::after {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: 0;
        left: 50%;
        background: var(--gradient-primary);
        border-radius: 1px;
        transition: var(--transition);
      }

      .nav-links a:hover {
        color: var(--primary);
      }

      .nav-links a:hover::after {
        width: 100%;
        left: 0;
      }

      /* Enhanced Search Bar */
      .search-container {
        position: relative;
        display: flex;
        align-items: center;
      }

      .search-bar {
        display: flex;
        align-items: center;
        background: rgba(255, 255, 255, 0.9);
        border: 2px solid var(--gray-200);
        border-radius: 50px;
        padding: 0.75rem 1.25rem;
        min-width: 300px;
        transition: var(--transition);
        backdrop-filter: var(--blur);
      }

      .search-bar:focus-within {
        background: var(--white);
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        transform: translateY(-1px);
      }

      .search-bar input {
        border: none;
        background: none;
        outline: none;
        flex: 1;
        padding: 0;
        font-size: 0.9rem;
        color: var(--text);
      }

      .search-bar input::placeholder {
        color: var(--text-light);
      }

      .search-icon {
        color: var(--text-light);
        margin-left: 0.5rem;
        font-size: 1.1rem;
      }

      /* Enhanced Cart Button */
      .cart-btn {
        background: var(--gradient-primary);
        color: var(--white);
        border: none;
        border-radius: 50px;
        padding: 0.75rem 1.5rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
      }

      .cart-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.2),
          transparent
        );
        transition: left 0.5s;
      }

      .cart-btn:hover::before {
        left: 100%;
      }

      .cart-btn:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-xl);
      }

      .cart-count {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        font-weight: 700;
      }

      /* Dynamic Hero Section with better mobile optimization */
      .hero {
        background: var(--gradient-hero);
        color: var(--white);
        padding: 8rem 2rem 6rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        margin-top: 80px;
        min-height: 70vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
      }

      .floating-elements {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        pointer-events: none;
      }

      .floating-element {
        position: absolute;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        animation: float 6s ease-in-out infinite;
      }

      .floating-element:nth-child(1) {
        width: 80px;
        height: 80px;
        top: 20%;
        left: 10%;
        animation-delay: 0s;
      }

      .floating-element:nth-child(2) {
        width: 120px;
        height: 120px;
        top: 60%;
        right: 10%;
        animation-delay: 2s;
      }

      .floating-element:nth-child(3) {
        width: 60px;
        height: 60px;
        top: 30%;
        right: 20%;
        animation-delay: 4s;
      }

      .hero-content {
        max-width: 900px;
        margin: 0 auto;
        position: relative;
        z-index: 2;
      }

      .hero h1 {
        font-size: clamp(2.5rem, 5vw, 4rem);
        font-weight: 800;
        margin-bottom: 1.5rem;
        line-height: 1.1;
        letter-spacing: -0.025em;
        opacity: 0;
        animation: slideInUp 1s ease 0.3s both;
      }

      .hero-subtitle {
        font-size: clamp(1rem, 2vw, 1.25rem);
        margin-bottom: 2.5rem;
        opacity: 0.9;
        font-weight: 400;
        line-height: 1.6;
        opacity: 0;
        animation: slideInUp 1s ease 0.6s both;
      }

      .hero-cta {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        opacity: 0;
        animation: slideInUp 1s ease 0.9s both;
      }

      .cta-primary,
      .cta-secondary {
        border-radius: 50px;
        padding: 1rem 2rem;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        border: none;
        white-space: nowrap;
      }

      .cta-primary {
        background: var(--white);
        color: var(--primary);
      }

      .cta-secondary {
        background: rgba(255, 255, 255, 0.1);
        color: var(--white);
        border: 2px solid rgba(255, 255, 255, 0.3);
        backdrop-filter: var(--blur);
      }

      .cta-primary:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-xl);
        background: var(--gray-50);
      }

      .cta-secondary:hover {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.5);
        transform: translateY(-3px);
      }

      /* Enhanced Categories Grid */
      .categories {
        padding: 6rem 2rem;
        max-width: 1400px;
        margin: 0 auto;
      }

      .section-header {
        text-align: center;
        margin-bottom: 4rem;
      }

      .section-title {
        font-size: clamp(2rem, 4vw, 3rem);
        font-weight: 800;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 1rem;
        letter-spacing: -0.025em;
      }

      .section-subtitle {
        font-size: clamp(1rem, 2vw, 1.2rem);
        color: var(--text-light);
        max-width: 600px;
        margin: 0 auto;
      }

      .category-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
      }

      .category-card {
        background: var(--white);
        border-radius: var(--radius-lg);
        padding: 2.5rem;
        text-align: center;
        box-shadow: var(--shadow);
        transition: var(--transition);
        cursor: pointer;
        position: relative;
        overflow: hidden;
        border: 1px solid var(--gray-200);
      }

      .category-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--gradient-primary);
        opacity: 0;
        transition: var(--transition);
      }

      .category-card:hover::before {
        opacity: 0.03;
      }

      .category-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: var(--shadow-xl);
        border-color: var(--primary);
      }

      .category-icon {
        width: 100px;
        height: 100px;
        background: var(--gradient-primary);
        border-radius: 50%;
        margin: 0 auto 2rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 2.5rem;
        color: var(--white);
        transition: var(--transition);
        position: relative;
        z-index: 2;
      }

      .category-card:hover .category-icon {
        transform: scale(1.1) rotate(5deg);
        box-shadow: var(--shadow-lg);
      }

      .category-card h3 {
        font-size: 1.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        position: relative;
        z-index: 2;
        color: var(--text);
      }

      .category-card p {
        color: var(--text-light);
        position: relative;
        z-index: 2;
        line-height: 1.6;
      }

      .product-count {
        background: var(--gradient-accent);
        color: var(--white);
        border-radius: 50px;
        padding: 0.4rem 1rem;
        font-size: 0.85rem;
        font-weight: 600;
        position: absolute;
        top: 1.5rem;
        right: 1.5rem;
        z-index: 3;
        box-shadow: var(--shadow);
      }

      /* Enhanced Product Grid */
      .featured {
        background: var(--white);
        padding: 6rem 2rem;
        border-top: 1px solid var(--gray-200);
      }

      .featured-content {
        max-width: 1400px;
        margin: 0 auto;
      }

      .filter-container {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 3rem;
        flex-wrap: wrap;
        padding: 1rem;
        background: rgba(
          255,
          255,
          255,
          0.05
        ); /* subtle transparent background */
        border-radius: 12px;
        backdrop-filter: blur(6px); /* modern glass effect */
      }

      .filter-btn {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.15);
        color: #ccc;
        padding: 0.6rem 1.2rem;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
        font-size: 0.95rem;
      }

      .filter-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        color: #fff;
        transform: translateY(-2px);
      }

      .filter-btn.active {
        background: linear-gradient(135deg, #6c63ff, #7b5bff);
        color: #fff;
        border: none;
        box-shadow: 0 4px 12px rgba(108, 99, 255, 0.4);
      }

      .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 2rem;
      }

      .product-card {
        background: var(--white);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        box-shadow: var(--shadow);
        transition: var(--transition);
        position: relative;
        overflow: hidden;
        border: 1px solid var(--gray-200);
      }

      .product-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-xl);
        border-color: var(--primary);
      }

      .product-image {
        width: 100%;
        height: 220px;
        background: var(--gray-100);
        border-radius: var(--radius);
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 3.5rem;
        color: var(--text-light);
        position: relative;
        overflow: hidden;
        transition: var(--transition);
      }

      .product-card:hover .product-image {
        background: var(--gray-50);
        transform: scale(1.02);
      }

      .wishlist-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255, 255, 255, 0.9);
        border: none;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: var(--transition);
        backdrop-filter: var(--blur);
        font-size: 1.2rem;
        box-shadow: var(--shadow);
      }

      .wishlist-btn:hover {
        background: var(--white);
        transform: scale(1.1);
      }

      .product-info {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .product-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 1rem;
      }

      .product-card h4 {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--text);
        line-height: 1.4;
        margin: 0;
      }

      .product-category {
        font-size: 0.8rem;
        color: var(--text-light);
        background: var(--gray-100);
        padding: 0.25rem 0.75rem;
        border-radius: 50px;
        font-weight: 500;
        white-space: nowrap;
      }

      .product-price {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary);
        margin: 0.5rem 0 1rem 0;
      }

      .product-actions {
        display: flex;
        gap: 0.75rem;
      }

      .add-to-cart {
        flex: 1;
        background: var(--gradient-primary);
        color: var(--white);
        border: none;
        border-radius: var(--radius);
        padding: 0.875rem 1.5rem;
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition);
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
      }

      .add-to-cart:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .quick-view {
        background: var(--gray-100);
        border: 1px solid var(--gray-200);
        border-radius: var(--radius);
        padding: 0.875rem;
        cursor: pointer;
        transition: var(--transition);
        font-size: 1.1rem;
        color: var(--text);
      }

      .quick-view:hover {
        background: var(--gray-200);
        transform: translateY(-2px);
      }

      /* Enhanced Stats Section */
      .stats {
        background: var(--dark);
        color: var(--white);
        padding: 4rem 2rem;
        position: relative;
        overflow: hidden;
      }

      .stats::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="dots" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="rgba(255,255,255,0.05)"/></pattern></defs><rect width="100" height="100" fill="url(%23dots)"/></svg>');
      }

      .stats-content {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 3rem;
        text-align: center;
        position: relative;
        z-index: 2;
      }

      .stat-item {
        padding: 2rem;
        border-radius: var(--radius-lg);
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: var(--blur);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: var(--transition);
      }

      .stat-item:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-5px);
      }

      .stat-item h3 {
        font-size: clamp(2rem, 5vw, 3.5rem);
        font-weight: 800;
        margin-bottom: 0.5rem;
        background: var(--gradient-accent);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .stat-item p {
        font-size: 1.1rem;
        font-weight: 500;
        color: rgba(255, 255, 255, 0.8);
      }

      /* Enhanced Footer */
      .footer {
        background: var(--darker);
        color: var(--white);
        padding: 4rem 2rem 2rem;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 3rem;
        margin-bottom: 3rem;
      }

      .footer-section h3 {
        font-size: 1.3rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        background: var(--gradient-accent);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .footer-section p,
      .footer-section a {
        color: rgba(255, 255, 255, 0.7);
        text-decoration: none;
        margin-bottom: 0.75rem;
        display: block;
        transition: var(--transition);
        line-height: 1.6;
      }

      .footer-section a:hover {
        color: var(--accent);
        transform: translateX(5px);
      }

      .footer-bottom {
        text-align: center;
        padding-top: 2rem;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: rgba(255, 255, 255, 0.6);
      }

      /* Loading States */
      .loading-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: var(--blur);
        z-index: 10000;
        align-items: center;
        justify-content: center;
      }

      .modern-spinner {
        width: 60px;
        height: 60px;
        border: 4px solid var(--gray-200);
        border-top: 4px solid var(--primary);
        border-radius: 50%;
        animation: modernSpin 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
      }

      /* Toast Notifications */
      .toast {
        position: fixed;
        top: 100px;
        right: 20px;
        background: var(--white);
        border: 1px solid var(--gray-200);
        border-radius: var(--radius);
        padding: 1rem 1.5rem;
        box-shadow: var(--shadow-xl);
        z-index: 10001;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        min-width: 300px;
        animation: slideInRight 0.3s ease;
        backdrop-filter: var(--blur);
      }

      .toast.success {
        border-left: 4px solid var(--success);
      }

      .toast.error {
        border-left: 4px solid var(--error);
      }

      .toast-icon {
        font-size: 1.2rem;
      }

      .toast-content {
        flex: 1;
      }

      .toast-title {
        font-weight: 600;
        color: var(--text);
        margin-bottom: 0.25rem;
      }

      .toast-message {
        color: var(--text-light);
        font-size: 0.9rem;
      }

      /* Animations */
      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(100%);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      @keyframes modernSpin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Enhanced Responsive Design */
      @media (max-width: 1024px) {
        .nav {
          padding: 1rem;
        }

        .search-bar {
          min-width: 250px;
        }

        .category-grid,
        .product-grid {
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }
      }

      /* Mobile view */
@media (max-width: 768px) {
  .nav {
    flex-direction: column;
    align-items: flex-start; /* everything left-aligned */
  }

  .logo {
    font-size: 1.5rem;
    margin-bottom: 0.3rem;
  }

  .nav-toggle {
    display: block;
    margin: 0 0 1rem 0;  /* push it slightly below logo */
    align-self: flex-start; /* pin it left under logo */
    font-size: 1.5rem;
    background: none;
    border: none;
    cursor: pointer;
  }

  .nav-links {
    display: none; /* hidden until toggled */
    flex-direction: column;
    width: 100%;
    background: var(--gray-900);
    border-radius: 8px;
    padding: 1rem;
  }

  .nav-links.active {
    display: flex;
  }

  .nav-links li {
    margin: 0.5rem 0;
  }

  .search-container {
    width: 100%;
    margin-top: 0.5rem;
  }

  .search-bar input {
    width: 100%;
  }
}

        .search-container {
          order: 3;
          margin-top: 1rem;
          width: 100%;
        }

        .search-bar {
          width: 100%;
          min-width: auto;
        }

        .hero {
          padding: 6rem 1rem 4rem;
          min-height: 60vh;
        }

        .hero-cta {
          flex-direction: column;
          align-items: center;
        }

        .cta-primary,
        .cta-secondary {
          width: 100%;
          max-width: 300px;
          justify-content: center;
        }

        .categories,
        .featured {
          padding: 4rem 1rem;
        }

        .category-grid,
        .product-grid {
          grid-template-columns: 1fr;
        }

        .filter-container {
          gap: 0.5rem;
        }

        .filter-btn {
          padding: 0.5rem 1rem;
          font-size: 0.8rem;
        }

        .nav {
          flex-wrap: wrap;
        }
      }

      @media (max-width: 480px) {
        .hero h1 {
          font-size: 2rem;
        }

        .category-card {
          padding: 1.5rem;
        }

        .category-icon {
          width: 80px;
          height: 80px;
          font-size: 2rem;
        }

        .product-card {
          padding: 1rem;
        }

        .product-image {
          height: 180px;
          font-size: 3rem;
        }

        .toast {
          left: 10px;
          right: 10px;
          min-width: auto;
        }
      }

      /* Dark Mode Support */
      @media (prefers-color-scheme: dark) {
        :root {
          --white: #1e293b;
          --gray-50: #0f172a;
          --gray-100: #1e293b;
          --gray-200: #334155;
          --text: #f1f5f9;
          --text-light: #94a3b8;
        }

        .category-card,
        .product-card,
        .header {
          background: var(--gray-800);
          color: var(--white);
          border-color: var(--gray-700);
        }

        .product-image {
          background: var(--gray-700);
        }

        .product-category {
          background: var(--gray-700);
          color: var(--gray-300);
        }

        .search-bar {
          background: rgba(30, 41, 59, 0.9);
          border-color: var(--gray-700);
        }

        .filter-btn {
          background: var(--gray-700);
          color: var(--white);
        }

        .filter-btn:hover {
          background: var(--gray-600);
        }
      }

      /* Additional enhancements */
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .category-card:hover {
        animation: pulse 0.6s ease-in-out;
      }

      .add-to-cart:active {
        transform: scale(0.95);
      }

      .add-to-cart:disabled {
        opacity: 0.7;
        cursor: not-allowed;
        background: #ccc;
      }

      .added-to-cart {
        animation: addedToCart 0.6s ease;
      }

      @keyframes addedToCart {
        0% {
          background: var(--success);
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          background: var(--gradient-primary);
          transform: scale(1);
        }
      }
    </style>
  </head>
  <body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
      <div class="modern-spinner"></div>
    </div>

    <!-- Header -->
<header class="header" id="header">
  <nav class="nav">
    <!-- Top row -->
    <div class="nav-top">
      <div class="logo">BStore</div>

      <!-- Toggle for mobile -->
      <button class="nav-toggle" id="navToggle">☰</button>
    </div>

    <!-- Search bar (mobile separate row, desktop inline) -->
    <div class="search-container">
      <div class="search-bar">
        <input
          type="text"
          placeholder="Search products..."
          id="searchInput"
        />
        <div class="search-icon">🔍</div>
      </div>
    </div>

    <!-- Nav links -->
    <ul class="nav-links" id="navLinks">
      <li><a href="#home">Home</a></li>
      <li><a href="#categories">Categories</a></li>
      <li><a href="#products">Products</a></li>
      <li><a href="#about">About</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>

    <!-- Cart button -->
    <button class="cart-btn" id="cartBtn">
      🛒 <span class="cart-count" id="cartCount">0</span>
    </button>
  </nav>
</header>


    <!-- Hero Section -->
    <section class="hero" id="home">
      <div class="floating-elements">
        <div class="floating-element"></div>
        <div class="floating-element"></div>
        <div class="floating-element"></div>
      </div>
      <div class="hero-content">
        <h1>Welcome to the Future of Shopping</h1>
        <p class="hero-subtitle">
          Discover cutting-edge electronics with premium quality, competitive
          prices, and exceptional service. Your tech journey starts here.
        </p>
        <div class="hero-cta">
          <button class="cta-primary" onclick="scrollToSection('categories')">
            🚀 Shop Now
          </button>
          <button class="cta-secondary" onclick="scrollToSection('products')">
            👀 Browse Catalog
          </button>
        </div>
      </div>
    </section>

    <!-- Categories Section -->
    <section class="categories" id="categories">
      <div class="section-header">
        <h2 class="section-title">Shop by Category</h2>
        <p class="section-subtitle">
          Explore our curated selection of premium electronics across all major
          categories
        </p>
      </div>
      <div class="category-grid" id="categoryGrid">
        <!-- Categories will be loaded dynamically -->
      </div>
    </section>

    <!-- Featured Products -->
    <section class="featured" id="products">
      <div class="featured-content">
        <div class="section-header">
          <h2 class="section-title" id="productSectionTitle">
            Featured Products
          </h2>
          <p class="section-subtitle">
            Hand-picked items from our premium collection
          </p>
        </div>

        <div class="filter-container" id="filterContainer">
          <!-- Filter buttons will be generated dynamically -->
        </div>

        <div class="product-grid" id="productGrid">
          <!-- Products will be loaded dynamically -->
        </div>
      </div>
    </section>

    <!-- Stats Section -->
    <section class="stats">
      <div class="stats-content">
        <div class="stat-item">
          <h3 id="customersCount">0</h3>
          <p>Happy Customers</p>
        </div>
        <div class="stat-item">
          <h3 id="productsCount">0</h3>
          <p>Products Available</p>
        </div>
        <div class="stat-item">
          <h3>24/7</h3>
          <p>Customer Support</p>
        </div>
        <div class="stat-item">
          <h3>99.9%</h3>
          <p>Satisfaction Rate</p>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-section">
          <h3>BStore</h3>
          <p>
            Your trusted electronics partner delivering cutting-edge technology
            with unmatched service excellence.
          </p>
          <p>
            Join thousands of satisfied customers who trust us for their tech
            needs.
          </p>
        </div>
        <div class="footer-section">
          <h3>Quick Links</h3>
          <a href="#home">Home</a>
          <a href="#categories">Categories</a>
          <a href="#products">Products</a>
          <a href="#support">Support</a>
          <a href="#warranty">Warranty</a>
        </div>
        <div class="footer-section">
          <h3>Customer Service</h3>
          <p>📧 support@bstore.co.ke</p>
          <p>📞 +254 7122 841 33</p>
          <p>💬 Live Chat Available</p>
          <p>📍 Nairobi, Kenya</p>
        </div>
        <div class="footer-section">
          <h3>Connect With Us</h3>
          <a href="#">Facebook</a>
          <a href="#">Twitter</a>
          <a href="#">Instagram</a>
          <a href="#">LinkedIn</a>
          <p style="margin-top: 1rem">📱 Download our mobile app</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>
          &copy; 2025 BStore Kenya. All rights reserved. |
          <a href="#" style="color: inherit">Privacy Policy</a> |
          <a href="#" style="color: inherit">Terms of Service</a>
        </p>
      </div>
    </footer>

    <!-- External Products Data -->
    <script src="products.js"></script>

    <script>
      // ===== APPLICATION STATE =====
      const AppState = {
        cart: [],
        wishlist: [],
        currentCategory: "all",
        isLoading: false,
        searchTerm: "",
      };

      // ===== UTILITY FUNCTIONS =====
      const Utils = {
        formatPrice: (price, currency = "KSh") => {
          return `${currency} ${price.toLocaleString()}`;
        },

        animateNumber: (element, start, end, duration = 2000) => {
          const startTime = performance.now();
          const animate = (currentTime) => {
            const elapsed = currentTime - startTime;
            const progress = Math.min(elapsed / duration, 1);
            const current = Math.floor(start + (end - start) * progress);
            element.textContent = current.toLocaleString();
            if (progress < 1) {
              requestAnimationFrame(animate);
            }
          };
          requestAnimationFrame(animate);
        },

        showLoading: () => {
          AppState.isLoading = true;
          document.getElementById("loadingOverlay").style.display = "flex";
        },

        hideLoading: () => {
          AppState.isLoading = false;
          document.getElementById("loadingOverlay").style.display = "none";
        },

        showToast: (title, message, type = "success") => {
          const existingToast = document.querySelector(".toast");
          if (existingToast) existingToast.remove();

          const toast = document.createElement("div");
          toast.className = `toast ${type}`;
          toast.innerHTML = `
                    <div class="toast-icon">${
                      type === "success" ? "✅" : "❌"
                    }</div>
                    <div class="toast-content">
                        <div class="toast-title">${title}</div>
                        <div class="toast-message">${message}</div>
                    </div>
                `;

          document.body.appendChild(toast);

          setTimeout(() => {
            toast.style.animation = "slideInRight 0.3s ease reverse";
            setTimeout(() => {
              if (document.body.contains(toast)) {
                document.body.removeChild(toast);
              }
            }, 300);
          }, 3000);
        },

        scrollToSection: (sectionId) => {
          const element = document.getElementById(sectionId);
          if (element) {
            element.scrollIntoView({
              behavior: "smooth",
              block: "start",
              inline: "nearest",
            });
          }
        },

        debounce: (func, wait) => {
          let timeout;
          return function executedFunction(...args) {
            const later = () => {
              clearTimeout(timeout);
              func(...args);
            };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
          };
        },
      };

      // ===== COMPONENT CREATORS =====
      const Components = {
        createCategoryCard: (categoryKey, categoryData) => {
          const card = document.createElement("div");
          card.className = "category-card";
          card.setAttribute("data-category", categoryKey);
          card.innerHTML = `
                    <div class="product-count">${categoryData.count}+</div>
                    <div class="category-icon">${categoryData.icon}</div>
                    <h3>${categoryData.name}</h3>
                    <p>${categoryData.description}</p>
                `;
          card.addEventListener("click", () =>
            CategoryManager.showCategory(categoryKey)
          );
          return card;
        },

        createProductCard: (product) => {
          const isInWishlist = AppState.wishlist.includes(product.id);
          const hasDiscount = product.originalPrice > product.price;
          const discountPercent = hasDiscount
            ? Math.round(
                ((product.originalPrice - product.price) /
                  product.originalPrice) *
                  100
              )
            : 0;

          const card = document.createElement("div");
          card.className = "product-card";
          card.setAttribute("data-product-id", product.id);

          card.innerHTML = `
                    <div class="product-image">
                        ${product.icon}
                        <button class="wishlist-btn" onclick="WishlistManager.toggle('${
                          product.id
                        }')" 
                                title="${
                                  isInWishlist
                                    ? "Remove from wishlist"
                                    : "Add to wishlist"
                                }">
                            ${isInWishlist ? "❤️" : "🤍"}
                        </button>
                        ${
                          hasDiscount
                            ? `<div style="position: absolute; top: 1rem; left: 1rem; background: var(--error); color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem; font-weight: 600;">-${discountPercent}%</div>`
                            : ""
                        }
                    </div>
                    <div class="product-info">
                        <div class="product-header">
                            <h4>${product.name}</h4>
                            <div class="product-category">${
                              product.category
                            }</div>
                        </div>
                        <div class="product-price">
                            ${Utils.formatPrice(
                              product.price,
                              product.currency
                            )}
                            ${
                              hasDiscount
                                ? `<span style="text-decoration: line-through; color: var(--text-light); font-size: 0.9rem; margin-left: 0.5rem;">${Utils.formatPrice(
                                    product.originalPrice,
                                    product.currency
                                  )}</span>`
                                : ""
                            }
                        </div>
                        <div class="product-rating" style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem; font-size: 0.9rem; color: var(--text-light);">
                            <span style="color: #fbbf24;">⭐</span> ${
                              product.rating
                            } (${product.reviews} reviews)
                        </div>
                        <div class="product-actions">
                            <button class="add-to-cart" onclick="CartManager.addToCart('${
                              product.id
                            }')">
                                🛒 Add to Cart
                            </button>
                            <button class="quick-view" onclick="ProductModal.show('${
                              product.id
                            }')" title="Quick view">
                                👁️
                            </button>
                        </div>
                    </div>
                `;

          return card;
        },

        createFilterButton: (text, value, active = false) => {
          const button = document.createElement("button");
          button.className = `filter-btn ${active ? "active" : ""}`;
          button.textContent = text;
          button.setAttribute("data-filter", value);
          button.addEventListener("click", () =>
            FilterManager.setFilter(value, button)
          );
          return button;
        },
      };

      // ===== MANAGERS =====
      const CategoryManager = {
        init: function () {
          const grid = document.getElementById("categoryGrid");
          if (!window.PRODUCT_DATA) {
            console.error("Product data not loaded");
            return;
          }
          Object.entries(window.PRODUCT_DATA.categories).forEach(
            ([key, category]) => {
              const card = Components.createCategoryCard(key, category);
              grid.appendChild(card);
            }
          );
        },

        showCategory: (categoryKey) => {
          Utils.showLoading();
          AppState.currentCategory = categoryKey;

          setTimeout(() => {
            const categoryName =
              window.PRODUCT_DATA.categories[categoryKey]?.name || "Products";
            document.getElementById("productSectionTitle").textContent =
              categoryName;

            ProductManager.loadProducts(categoryKey);
            FilterManager.updateFilters(categoryKey);
            Utils.hideLoading();
            Utils.scrollToSection("products");
          }, 800);
        },
      };

      const ProductManager = {
        // Load products by category
        loadProducts: function (category = "all") {
          const grid = document.getElementById("productGrid");
          grid.innerHTML = "";

          if (!window.PRODUCT_DATA) {
            grid.innerHTML =
              '<div style="grid-column: 1 / -1; text-align: center; padding: 4rem; color: var(--error);">Error: Product data not loaded</div>';
            return;
          }

          let products = [];
          if (category === "all") {
            products = Object.values(window.PRODUCT_DATA.products).flat();
          } else if (window.PRODUCT_DATA.products[category]) {
            products = window.PRODUCT_DATA.products[category];
          }

          // Apply search filter
          if (AppState.searchTerm) {
            products = this.filterBySearch(products, AppState.searchTerm);
          }

          // Handle empty state
          if (products.length === 0) {
            grid.innerHTML = `
        <div style="grid-column: 1 / -1; text-align: center; padding: 4rem 2rem; color: var(--text-light);">
          <div style="font-size: 4rem; margin-bottom: 1rem;">🔍</div>
          <h3>No products found</h3>
          <p>Try adjusting your search or browse different categories.</p>
        </div>
      `;
          } else {
            products.forEach((product) => {
              const card = Components.createProductCard(product);
              grid.appendChild(card);
            });
          }

          this.animateProductCards(grid);
        },

        // Load featured products
        loadFeaturedProducts: function () {
          if (!window.PRODUCT_DATA) return;

          const featured = [
            ...window.PRODUCT_DATA.products.phones.slice(0, 2),
            ...window.PRODUCT_DATA.products.laptops.slice(0, 2),
            ...window.PRODUCT_DATA.products.accessories.slice(0, 2),
            ...window.PRODUCT_DATA.products.pcs.slice(0, 2),
          ];

          const grid = document.getElementById("productGrid");
          grid.innerHTML = "";

          featured.forEach((product) => {
            const card = Components.createProductCard(product);
            grid.appendChild(card);
          });

          this.animateProductCards(grid);
        },

        // Search filter
        filterBySearch: function (products, searchTerm) {
          const term = searchTerm.toLowerCase();
          return products.filter(
            (product) =>
              product.name.toLowerCase().includes(term) ||
              product.category.toLowerCase().includes(term) ||
              product.features?.some((feature) =>
                feature.toLowerCase().includes(term)
              )
          );
        },

        // Animate product cards
        animateProductCards: function (grid) {
          setTimeout(() => {
            const cards = grid.querySelectorAll(".product-card");
            cards.forEach((card, index) => {
              card.style.opacity = "0";
              card.style.transform = "translateY(30px)";
              card.style.transition = `all 0.6s ease ${index * 0.1}s`;

              setTimeout(() => {
                card.style.opacity = "1";
                card.style.transform = "translateY(0)";
              }, index * 100);
            });
          }, 100);
        },
        // Initial animation setup
        setupAnimations: function () {
          const grid = document.getElementById("productGrid");
          if (grid) {
            this.animateProductCards(grid);
          }
        },

        // Find product by ID
        getProductById: function (productId) {
          if (!window.PRODUCT_DATA) return null;
          for (const category of Object.values(window.PRODUCT_DATA.products)) {
            const product = category.find((p) => p.id === productId);
            if (product) return product;
          }
          return null;
        },
      };

      const FilterManager = {
        init: function () {
          const container = document.getElementById("filterContainer");
          const filters = [
            { text: "All Products", value: "all", active: true },
            { text: "Mobile Phones", value: "phones" },
            { text: "Laptops", value: "laptops" },
            { text: "Accessories", value: "accessories" },
            { text: "Desktop PCs", value: "pcs" },
          ];

          filters.forEach((filter) => {
            const button = Components.createFilterButton(
              filter.text,
              filter.value,
              filter.active
            );
            container.appendChild(button);
          });
        },

        setFilter: (value, buttonElement) => {
          // Update active state
          document
            .querySelectorAll(".filter-btn")
            .forEach((btn) => btn.classList.remove("active"));
          buttonElement.classList.add("active");

          // Update content
          AppState.currentCategory = value;
          if (value === "all") {
            document.getElementById("productSectionTitle").textContent =
              "Featured Products";
            ProductManager.loadFeaturedProducts();
          } else {
            const categoryName =
              window.PRODUCT_DATA.categories[value]?.name || "Products";
            document.getElementById("productSectionTitle").textContent =
              categoryName;
            ProductManager.loadProducts(value);
          }
        },

        updateFilters: (activeCategory) => {
          document.querySelectorAll(".filter-btn").forEach((btn) => {
            btn.classList.remove("active");
            if (btn.getAttribute("data-filter") === activeCategory) {
              btn.classList.add("active");
            }
          });
        },
      };

      const CartManager = {
        addToCart(productId) {
          const product = ProductManager.getProductById(productId);
          if (!product) return;

          // Check if already in cart
          const existingItem = AppState.cart.find(
            (item) => item.id === productId
          );
          if (existingItem) {
            existingItem.quantity += 1;
          } else {
            AppState.cart.push({
              ...product,
              quantity: 1,
              addedAt: new Date(),
            });
          }

          // Update UI correctly
          CartManager.updateCartUI();

          // Add visual feedback on button
          const button = document.querySelector(
            `[data-product-id="${productId}"] .add-to-cart`
          );
          if (button) {
            button.classList.add("added-to-cart");
            setTimeout(() => button.classList.remove("added-to-cart"), 600);
          }

          Utils.showToast(
            "Added to Cart!",
            `${product.name} has been added to your cart.`,
            "success"
          );
        },

        removeFromCart(productId) {
          AppState.cart = AppState.cart.filter((item) => item.id !== productId);
          CartManager.updateCartUI();
        },

        updateCartUI() {
          const summary = CartManager.getCartSummary();
          const cartCount = document.getElementById("cartCount");
          if (cartCount) {
            cartCount.textContent = summary.totalItems; // 👈 show total items, not unique
          }
        },

        getCartSummary() {
          const total = AppState.cart.reduce(
            (sum, item) => sum + item.price * item.quantity,
            0
          );
          return {
            items: AppState.cart,
            totalItems: AppState.cart.reduce(
              (sum, item) => sum + item.quantity,
              0
            ),
            totalPrice: total,
            formattedTotal: Utils.formatPrice(total),
          };
        },
      };

      const WishlistManager = {
        toggle: function (productId) {
          const product = ProductManager.getProductById(productId);
          if (!product) return;

          const index = AppState.wishlist.indexOf(productId);
          if (index > -1) {
            AppState.wishlist.splice(index, 1);
            Utils.showToast(
              "Removed from Wishlist",
              `${product.name} has been removed from your wishlist.`,
              "success"
            );
          } else {
            AppState.wishlist.push(productId);
            Utils.showToast(
              "Added to Wishlist!",
              `${product.name} has been added to your wishlist.`,
              "success"
            );
          }

          this.updateWishlistUI();
        },

        updateWishlistUI: function () {
          // Update all wishlist buttons
          document.querySelectorAll(".wishlist-btn").forEach((btn) => {
            const card = btn.closest(".product-card");
            const productId = card?.getAttribute("data-product-id");
            if (productId) {
              const isInWishlist = AppState.wishlist.includes(productId);
              btn.innerHTML = isInWishlist ? "❤️" : "🤍";
              btn.title = isInWishlist
                ? "Remove from wishlist"
                : "Add to wishlist";
            }
          });
        },
      };

      const SearchManager = {
        init: function () {
          const searchInput = document.getElementById("searchInput");
          const debouncedSearch = Utils.debounce((term) => {
            AppState.searchTerm = term;
            if (term.length >= 2) {
              ProductManager.loadProducts(AppState.currentCategory);
            } else if (term.length === 0) {
              if (AppState.currentCategory === "all") {
                ProductManager.loadFeaturedProducts();
              } else {
                ProductManager.loadProducts(AppState.currentCategory);
              }
            }
          }, 300);

          searchInput.addEventListener("input", (e) => {
            debouncedSearch(e.target.value);
          });

          // Add search shortcut (Ctrl+K)
          document.addEventListener("keydown", (e) => {
            if (e.ctrlKey && e.key === "k") {
              e.preventDefault();
              searchInput.focus();
            }
          });
        },
      };

      const StatsManager = {
        init: function () {
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  this.animateStats();
                  observer.disconnect();
                }
              });
            },
            { threshold: 0.5 }
          );

          const statsSection = document.querySelector(".stats");
          if (statsSection) {
            observer.observe(statsSection);
          }
        },

        animateStats: function () {
          if (!window.PRODUCT_DATA) return;

          const totalProducts = Object.values(
            window.PRODUCT_DATA.products
          ).reduce((sum, category) => sum + category.length, 0);

          Utils.animateNumber(
            document.getElementById("customersCount"),
            0,
            12500
          );
          Utils.animateNumber(
            document.getElementById("productsCount"),
            0,
            totalProducts
          );
        },
      };

      const ProductModal = {
        show: (productId) => {
          const product = ProductManager.getProductById(productId);
          if (!product) return;

          const modal = document.createElement("div");
          modal.className = "product-modal-overlay";
          modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.8);
                    backdrop-filter: blur(10px);
                    z-index: 10000;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 2rem;
                    animation: fadeIn 0.3s ease;
                `;

          const modalContent = document.createElement("div");
          modalContent.className = "product-modal-content";
          modalContent.style.cssText = `
                    background: white;
                    border-radius: 20px;
                    padding: 2rem;
                    max-width: 600px;
                    width: 100%;
                    max-height: 90vh;
                    overflow-y: auto;
                    position: relative;
                    animation: slideInUp 0.3s ease;
                `;

          const hasDiscount = product.originalPrice > product.price;
          const discountPercent = hasDiscount
            ? Math.round(
                ((product.originalPrice - product.price) /
                  product.originalPrice) *
                  100
              )
            : 0;

          modalContent.innerHTML = `
                    <button onclick="this.closest('.product-modal-overlay').remove()" 
                            style="position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-light);">✕</button>
                    
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <div style="font-size: 6rem; margin-bottom: 1rem;">${
                          product.icon
                        }</div>
                        <h2 style="font-size: 1.8rem; margin-bottom: 0.5rem; color: var(--text);">${
                          product.name
                        }</h2>
                        <div style="background: var(--gradient-primary); color: white; display: inline-block; padding: 0.25rem 1rem; border-radius: 50px; font-size: 0.9rem; font-weight: 600;">${
                          product.category
                        }</div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
                        <div>
                            <h3 style="color: var(--text); margin-bottom: 1rem;">Price</h3>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--primary);">
                                ${Utils.formatPrice(
                                  product.price,
                                  product.currency
                                )}
                                ${
                                  hasDiscount
                                    ? `<div style="font-size: 1rem; color: var(--text-light); text-decoration: line-through;">${Utils.formatPrice(
                                        product.originalPrice,
                                        product.currency
                                      )}</div>`
                                    : ""
                                }
                                ${
                                  hasDiscount
                                    ? `<div style="color: var(--success); font-size: 1rem; font-weight: 600;">Save ${discountPercent}%!</div>`
                                    : ""
                                }
                            </div>
                        </div>
                        <div>
                            <h3 style="color: var(--text); margin-bottom: 1rem;">Rating</h3>
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <span style="color: #fbbf24; font-size: 1.2rem;">⭐⭐⭐⭐⭐</span>
                                <span style="font-weight: 600;">${
                                  product.rating
                                }</span>
                            </div>
                            <div style="color: var(--text-light); font-size: 0.9rem;">${
                              product.reviews
                            } customer reviews</div>
                        </div>
                    </div>

                    <div style="margin-bottom: 2rem;">
                        <h3 style="color: var(--text); margin-bottom: 1rem;">Key Features</h3>
                        <div style="display: grid; gap: 0.75rem;">
                            ${product.features
                              .map(
                                (feature) => `
                                <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: var(--gray-50); border-radius: 8px;">
                                    <span style="color: var(--success);">✓</span>
                                    <span>${feature}</span>
                                </div>
                            `
                              )
                              .join("")}
                        </div>
                    </div>

                    <div style="display: flex; gap: 1rem;">
                        <button onclick="CartManager.addToCart('${
                          product.id
                        }'); this.closest('.product-modal-overlay').remove();" 
                                style="flex: 1; background: var(--gradient-primary); color: white; border: none; border-radius: 12px; padding: 1rem 2rem; font-weight: 600; cursor: pointer; font-size: 1rem;">
                            🛒 Add to Cart
                        </button>
                        <button onclick="WishlistManager.toggle('${
                          product.id
                        }'); this.closest('.product-modal-overlay').remove();" 
                                style="background: var(--gray-100); border: 1px solid var(--gray-200); border-radius: 12px; padding: 1rem; cursor: pointer; font-size: 1.2rem;">
                            ${
                              AppState.wishlist.includes(product.id)
                                ? "❤️"
                                : "🤍"
                            }
                        </button>
                    </div>
                `;

          modal.appendChild(modalContent);
          document.body.appendChild(modal);

          // Close on background click
          modal.addEventListener("click", (e) => {
            if (e.target === modal) {
              modal.remove();
            }
          });

          // Close on Escape key
          const closeOnEscape = (e) => {
            if (e.key === "Escape") {
              modal.remove();
              document.removeEventListener("keydown", closeOnEscape);
            }
          };
          document.addEventListener("keydown", closeOnEscape);
        },
      };

      // ===== EVENT HANDLERS =====
      const EventHandlers = {
        init: function () {
          // Header scroll effect
          window.addEventListener("scroll", () => {
            const header = document.getElementById("header");
            if (window.scrollY > 50) {
              header.classList.add("scrolled");
            } else {
              header.classList.remove("scrolled");
            }
          });

          // Mobile navigation toggle
          const navToggle = document.getElementById("navToggle");
          const navLinks = document.getElementById("navLinks");

          navToggle.addEventListener("click", () => {
            navLinks.classList.toggle("active");
            navToggle.textContent = navLinks.classList.contains("active")
              ? "✕"
              : "☰";
          });

          // Close mobile nav when clicking on links
          document.querySelectorAll(".nav-links a").forEach((link) => {
            link.addEventListener("click", () => {
              navLinks.classList.remove("active");
              navToggle.textContent = "☰";
            });
          });

          // Cart button click
          document.getElementById("cartBtn").addEventListener("click", () => {
            const summary = CartManager.getCartSummary();
            if (summary.totalItems === 0) {
              Utils.showToast(
                "Cart Empty",
                "Your cart is currently empty. Add some products!",
                "error"
              );
              return;
            }

            let cartDetails = `🛒 CART SUMMARY\n\n`;
            summary.items.forEach((item, index) => {
              cartDetails += `${index + 1}. ${item.name}\n`;
              cartDetails += `   ${Utils.formatPrice(item.price)} x ${
                item.quantity
              } = ${Utils.formatPrice(item.price * item.quantity)}\n\n`;
            });
            cartDetails += `📊 TOTAL: ${summary.formattedTotal}\n`;
            cartDetails += `📦 Items: ${summary.totalItems}`;

            alert(cartDetails);
          });

          // Smooth scrolling for navigation
          document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
            anchor.addEventListener("click", (e) => {
              e.preventDefault();
              const targetId = anchor.getAttribute("href").substring(1);
              Utils.scrollToSection(targetId);
            });
          });

          // Keyboard shortcuts
          document.addEventListener("keydown", (e) => {
            if (e.ctrlKey) {
              switch (e.key) {
                case "h":
                  e.preventDefault();
                  Utils.scrollToSection("home");
                  break;
                case "p":
                  e.preventDefault();
                  Utils.scrollToSection("products");
                  break;
              }
            }
          });

          // Close mobile nav when clicking outside
          document.addEventListener("click", (e) => {
            if (
              !e.target.closest(".nav") &&
              navLinks.classList.contains("active")
            ) {
              navLinks.classList.remove("active");
              navToggle.textContent = "☰";
            }
          });
        },
      };

      // ===== INITIALIZATION =====
      const App = {
        init: function () {
          // Check if product data is loaded
          if (!window.PRODUCT_DATA) {
            console.error(
              "Product data not loaded. Make sure products.js is included."
            );
            return;
          }

          // Initialize all managers
          CategoryManager.init();
          FilterManager.init();
          SearchManager.init();
          StatsManager.init();
          EventHandlers.init();

          // Load initial content
          ProductManager.loadFeaturedProducts();

          // Setup intersection observer for animations
          this.setupAnimations();

          console.log("🚀 BStore Modern Ecommerce initialized successfully!");
        },

        setupAnimations: function () {
          const observerOptions = {
            threshold: 0.1,
            rootMargin: "0px 0px -50px 0px",
          };

          const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.style.opacity = "1";
                entry.target.style.transform = "translateY(0)";
              }
            });
          }, observerOptions);

          // Observe elements for animation
          setTimeout(function () {
            document
              .querySelectorAll(".category-card, .stat-item")
              .forEach((el, index) => {
                el.style.opacity = "0";
                el.style.transform = "translateY(30px)";
                el.style.transition = `all 0.6s ease ${index * 0.1}s`;
                observer.observe(el);
              });
          }, 100);
        },
      };

      // Global function declarations for onclick handlers
      window.scrollToSection = Utils.scrollToSection;
      window.CartManager = CartManager;
      window.WishlistManager = WishlistManager;
      window.ProductModal = ProductModal;

      // Initialize app when DOM is loaded
      document.addEventListener("DOMContentLoaded", () => {
        // Wait a bit for products.js to load
        setTimeout(App.init(), 100);
      });
    </script>
  </body>
</html>
